(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fc5f5fc"],{"30c6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"jtqCard"},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"标签名称","label-width":"70px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"城市","label-width":"70px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changeCitys},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},e._l(e.selprovinces,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"地区","label-width":"70px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},e._l(e.selcitys,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业简称","label-width":"70px"}},[a("el-input",{model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"状态","label-width":"70px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},e._l(e.apiStatus,(function(t){return a("el-option",{key:t.id,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{"margin-left":"25px"},attrs:{size:"small"},on:{click:e.clearAll}},[e._v("清除")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchCompany}},[e._v("搜索")])],1),a("el-button",{staticClass:"jtqBtn",attrs:{icon:"el-icon-edit",type:"success",size:"small"},on:{click:function(t){return e.editDo()}}},[e._v("新增用户")])],1)],1),e.sum&&e.sumFlag?a("Alert",{attrs:{total:e.sum}}):e._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"number",label:"企业编号"}}),a("el-table-column",{attrs:{align:"center",prop:"shortName",label:"企业简称"}}),a("el-table-column",{attrs:{align:"center",prop:"tags",label:"标签"}}),a("el-table-column",{attrs:{align:"center",prop:"creatorID",label:"创建者"}}),a("el-table-column",{attrs:{align:"center",prop:"addDate",label:"创建日期"}}),a("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{align:"center",prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(0===a.state?"启动":"禁用")+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{circle:"",plain:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.editDo(r)}}}),a("el-button",{attrs:{circle:"",plain:"",type:0===r.state?"warning":"success",icon:0===r.state?"el-icon-close":"el-icon-check"},on:{click:function(t){return e.changeState(r.id,r.state)}}}),a("el-button",{attrs:{circle:"",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.delData(r)}}})]}}])})],1),e.sum&&e.sumFlag?a("Pagination",{attrs:{page:e.page,pagesize:e.pagesize,total:e.sum},on:{"update:page":function(t){e.page=t},"update:pagesize":function(t){e.pagesize=t}}}):e._e()],1),a("el-dialog",{attrs:{visible:e.showDialog,title:e.btnTitle},on:{close:e.isNo}},[a("el-form",{ref:"refForm",staticStyle:{width:"510px"},attrs:{model:e.dialogForm,"label-width":"160px",rules:e.rules}},[a("el-form-item",{attrs:{label:"企业名称",prop:"shortName"}},[a("el-input",{model:{value:e.dialogForm.shortName,callback:function(t){e.$set(e.dialogForm,"shortName",t)},expression:"dialogForm.shortName"}})],1),a("el-form-item",{attrs:{label:"所属公司",prop:"company"}},[a("el-input",{model:{value:e.dialogForm.company,callback:function(t){e.$set(e.dialogForm,"company",t)},expression:"dialogForm.company"}}),a("p",[e._v("https://www.tianyancha.com（在此可查询所属公司全称及简称）")])],1),a("el-form-item",{attrs:{label:"城市地区",required:""}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{prop:"province"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changeCitys},model:{value:e.dialogForm.province,callback:function(t){e.$set(e.dialogForm,"province",t)},expression:"dialogForm.province"}},e._l(e.selprovinces,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"city"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.city,callback:function(t){e.$set(e.dialogForm,"city",t)},expression:"dialogForm.city"}},e._l(e.selcitys,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"方向（企业标签）",prop:"company"}},[a("el-input",{model:{value:e.dialogForm.tags,callback:function(t){e.$set(e.dialogForm,"tags",t)},expression:"dialogForm.tags"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"company"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remarks,callback:function(t){e.$set(e.dialogForm,"remarks",t)},expression:"dialogForm.remarks"}})],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:9}},[a("el-button",{staticStyle:{"margin-left":"25px"},attrs:{size:"small"},on:{click:e.isNo}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.isOk}},[e._v("确定")])],1)],1)],1)],1)],1)},n=[],s=a("5530"),i=a("1da1"),l=(a("96cf"),a("ebc3")),o=a("8b6d"),c=a("546c"),u=a("b59c"),m={status:[{id:"1",value:"启用"},{id:"2",value:"禁用"}],role:[{id:"1",value:"管理员"},{id:"2",value:"审核员"},{id:"3",value:"普通用户"},{id:"4",value:"试题录入"}]},p={name:"Permissions",data:function(){return{initRow:null,dialogForm:{shortName:"",company:"",province:"",city:"",tags:"",remarks:"",isFamous:!0},rules:{shortName:[{required:!0,message:"企业简称不能为空",trigger:"blur"}],company:[{required:!0,message:"所属公司不能为空",trigger:"blur"}],province:[{required:!0,message:"请选择活动区域",trigger:"change"}],city:[{required:!0,message:"请选择活动区域",trigger:"change"}],tags:[{required:!0,message:"请输入标签",trigger:"blur"}],remarks:[{required:!0,message:"备注不能为空",trigger:"blur"}]},btnTitle:"",showDialog:!1,apiStatus:[],selprovinces:[],selcitys:[],list:[],page:1,pagesize:10,sum:null,sumFlag:!1,form:{tags:"",province:"",city:"",shortName:"",state:""}}},created:function(){this.listData(),this.selprovinces=Object(u["b"])(),this.apiStatus=m.status},components:{Alert:l["a"],Pagination:o["a"]},watch:{page:function(){this.listData()},pagesize:function(){this.listData()}},methods:{delData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("此操作将永久删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.sumFlag=!1,a.next=3,Object(c["d"])({id:e.id});case 3:t.sumFlag=!0,t.$message({type:"success",message:"成功删除了用户!"}),t.listData();case 6:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消操作"})}));case 1:case"end":return a.stop()}}),a)})))()},isOk:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.refForm.validate();case 2:if(void 0!==e.initRow){t.next=17;break}return t.prev=3,e.sumFlag=!1,t.next=7,Object(c["a"])(e.dialogForm);case 7:e.sumFlag=!0,e.$message.success("添加成功"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$message.error("添加失败"),console.log(t.t0);case 15:t.next=31;break;case 17:return delete e.initRow.username,1===e.initRow.isFamous?e.initRow.isFamous=!0:e.initRow.isFamous=!1,t.prev=19,e.sumFlag=!1,t.next=23,Object(c["e"])(Object(s["a"])(Object(s["a"])({},e.initRow),e.dialogForm));case 23:e.sumFlag=!0,e.$message.success("编辑成功"),t.next=31;break;case 27:t.prev=27,t.t1=t["catch"](19),e.$message.error("编辑失败"),console.log(t.t1);case 31:e.listData(),e.isNo();case 33:case"end":return t.stop()}}),t,null,[[3,11],[19,27]])})))()},isNo:function(){this.initRow=null,this.$refs.refForm.resetFields(),this.dialogForm={shortName:"",company:"",province:"",city:"",tags:"",remarks:"",isFamous:!0},this.showDialog=!1},editDo:function(e){e&&e.id?this.btnTitle="编辑用户":this.btnTitle="创建用户",this.initRow=e,void 0!==this.initRow&&(this.dialogForm=this.initRow),this.showDialog=!0},searchCompany:function(){this.sumFlag=!1,this.listData()},clearAll:function(){this.form={tags:"",province:"",city:"",shortName:"",state:""}},changeCitys:function(){this.selcitys=Object(u["a"])(this.form.province),this.form.city=this.selcitys[0],this.selcitys=Object(u["a"])(this.dialogForm.province),this.dialogForm.city=this.selcitys[0]},changeState:function(e,t){var a=this,r="";r=1===t?"启动":"禁用",this.$confirm("已成功".concat(r,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=0===t?1:0,n.next=3,Object(c["b"])({id:e,state:s});case 3:a.$message({type:"success",message:"已成功".concat(r,"!")}),a.listData();case 5:case"end":return n.stop()}}),n)})))).catch((function(){a.$message({type:"info",message:"已取消操作"})}))},headerStyle:function(){return{backgroundColor:"#f5f7fa"}},listData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,l,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in a={},e.form)""!==e.form[r]&&(a[r]=e.form[r]);return t.next=4,Object(c["c"])(Object(s["a"])({page:e.page,pagesize:e.pagesize},a));case 4:n=t.sent,i=n.data,l=i.counts,o=i.items,e.sum=l,e.sumFlag=!0,e.list=o;case 11:case"end":return t.stop()}}),t)})))()}}},g=p,d=a("2877"),f=Object(d["a"])(g,r,n,!1,null,"5830f2c9",null);t["default"]=f.exports},"546c":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return o}));a("99af");var r=a("b775"),n=function(e){return Object(r["a"])("/companys","get",e)},s=function(e){return Object(r["a"])("/companys","post",e)},i=function(e){return Object(r["a"])("/companys/".concat(e.id),"put",e)},l=function(e){return Object(r["a"])("/companys/".concat(e.id),"delete",e)},o=function(e){return Object(r["a"])("/companys/".concat(e.id,"/").concat(e.state),"post",e)}},"8b6d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":10,layout:"prev, pager, next,sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)},n=[],s=(a("a9e3"),{name:"Pagination",props:{total:Number,page:Number,pagesize:Number},data:function(){return{currentPage:null}},methods:{handleSizeChange:function(e){this.$emit("update:pagesize",e)},handleCurrentChange:function(e){this.currentPage=e,this.$emit("update:page",e)}}}),i=s,l=a("2877"),o=Object(l["a"])(i,r,n,!1,null,"17e11777",null);t["a"]=o.exports},ce38:function(e,t,a){},d327:function(e,t,a){"use strict";a("ce38")},ebc3:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{staticClass:"alert-m",attrs:{title:e.alertText,type:"info","show-icon":"",closable:!1}})],1)},n=[],s=(a("a9e3"),{name:"Alert",props:{total:Number},data:function(){return{alertText:"共".concat(this.total,"条记录")}}}),i=s,l=(a("d327"),a("2877")),o=Object(l["a"])(i,r,n,!1,null,"1ead9050",null);t["a"]=o.exports}}]);
//# sourceMappingURL=chunk-7fc5f5fc.74cfc599.js.map